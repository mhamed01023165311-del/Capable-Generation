<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† - Firebase</title>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            position: relative;
            overflow-x: hidden;
        }

        /* ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        #bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }

        /* Ø·Ø¨Ù‚Ø© Ø¯Ø§ÙƒÙ†Ø© ÙÙˆÙ‚ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }

        /* Ø¹Ù†Ø§ØµØ± Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .bg-animation span {
            position: absolute;
            display: block;
            width: 20px;
            height: 20px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 50%;
            animation: float 15s infinite;
            bottom: -150px;
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0.5;
            }
        }

        .container {
            width: 90%;
            max-width: 600px;
            padding: 20px;
            z-index: 1;
        }

        .logo {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid #ffd700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .box {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: 2px solid #ffd700;
            border-radius: 25px;
            padding: 35px;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.3);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #ffd700;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2rem;
            text-shadow: 0 0 15px #ffd700;
            font-weight: bold;
        }

        h3 {
            color: #ffd700;
            margin: 25px 0 15px;
            font-size: 1.4rem;
            border-right: 4px solid #ffd700;
            padding-right: 15px;
        }

        input, textarea, select {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ffd700;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            box-shadow: 0 0 20px #ffd700;
            background: rgba(255, 255, 255, 0.15);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        button {
            width: 100%;
            padding: 16px;
            margin: 10px 0;
            border: none;
            border-radius: 12px;
            background: #ffd700;
            color: black;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            transform: scale(1.02);
            box-shadow: 0 0 25px #ffd700;
        }

        button.secondary {
            background: transparent;
            border: 2px solid #ffd700;
            color: #ffd700;
        }

        button.secondary:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        .question-text {
            font-size: 1.8rem;
            color: #ffd700;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .answer-btn {
            width: 100%;
            padding: 18px;
            margin: 10px 0;
            border: 2px solid #ffd700;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: right;
            font-weight: bold;
        }

        .answer-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .answer-btn:active {
            transform: scale(0.98);
        }

        .stats-box {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .stat {
            flex: 1;
            min-width: 100px;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .stat.correct {
            border: 2px solid #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .stat.wrong {
            border: 2px solid #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
        }

        .stat-number.correct {
            color: #28a745;
        }

        .stat-number.wrong {
            color: #dc3545;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 5px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .action-btn.correct {
            border-color: #28a745;
        }

        .action-btn.correct:hover {
            background: rgba(40, 167, 69, 0.3);
            box-shadow: 0 0 20px #28a745;
        }

        .action-btn.wrong {
            border-color: #dc3545;
        }

        .action-btn.wrong:hover {
            background: rgba(220, 53, 69, 0.3);
            box-shadow: 0 0 20px #dc3545;
        }

        .archive-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-right: 4px solid #ffd700;
            position: relative;
        }

        .archive-item .delete-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            width: auto;
            padding: 5px 10px;
            background: #dc3545;
            font-size: 0.8rem;
        }

        .hidden {
            display: none !important;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            border-radius: 50px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ffd700;
            color: white;
            z-index: 1000;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            animation: slideUp 0.3s;
        }

        .toast.error {
            border-color: #dc3545;
        }

        @keyframes slideUp {
            from { bottom: 20px; opacity: 0; }
            to { bottom: 30px; opacity: 1; }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #ffd700;
            font-size: 1.2rem;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #ffd700;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        @media (max-width: 768px) {
            .box { padding: 20px; }
            h2 { font-size: 1.8rem; }
            h3 { font-size: 1.2rem; }
            .question-text { font-size: 1.5rem; }
            .answer-btn { font-size: 1.1rem; padding: 15px; }
            .stats-box { flex-direction: column; }
            .stat { min-width: auto; }
        }
    </style>
</head>
<body>
    <!-- ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ù„ÙÙŠØ© -->
    <video autoplay muted loop id="bg-video">
        <source src="background.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>

    <!-- Ø¹Ù†Ø§ØµØ± Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© -->
    <div class="bg-animation" id="bgAnimation"></div>

    <!-- Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© (ØªØ¨Ø¯Ø£ Ø¨Ø¹Ø¯ ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) -->
    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div id="loginScreen">
            <div class="box">
                <div class="logo">
                    <img src="loge.png" alt="Logo" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22%23ffd700%22/><text x=%2250%22 y=%2270%22 font-size=%2260%22 text-anchor=%22middle%22 fill=%22black%22>ğŸŒ™</text></svg>'">
                </div>
                <h2>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</h2>
                <input type="email" id="emailInput" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" value="admin@ramadan.com">
                <button onclick="login()">Ø¯Ø®ÙˆÙ„ âœ¨</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© -->
        <div id="quizScreen" class="hidden">
            <div class="box">
                <div class="logo">
                    <img src="loge.png" alt="Logo">
                </div>
                <h2 id="questionText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h2>
                <div id="answersContainer" class="answers-container"></div>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø¯ÙŠØ± -->
        <div id="adminScreen" class="hidden">
            <div class="box">
                <div class="logo">
                    <img src="loge.png" alt="Logo">
                </div>
                <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
                
                <h3>â• Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯</h3>
                <input type="text" id="qText" placeholder="Ø§Ù„Ø³Ø¤Ø§Ù„">
                <input type="text" id="a1" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© 1">
                <input type="text" id="a2" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© 2">
                <input type="text" id="a3" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© 3">
                <input type="text" id="a4" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© 4">
                <input type="number" id="correct" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© (1-4)" min="1" max="4">
                <button onclick="addQuestion()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„</button>

                <div class="stats-box" id="statsContainer">
                    <div class="stat">
                        <div class="stat-number">0</div>
                        <div class="stat-label">ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">0</div>
                        <div class="stat-label">Ø®Ø§Ø·Ø¦Ø©</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn correct" onclick="showCorrectAnswers()">âœ… ØµØ­</button>
                    <button class="action-btn wrong" onclick="showWrongAnswers()">âŒ ØºÙ„Ø·</button>
                </div>

                <h3>ğŸ“š Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h3>
                <div id="archiveContainer"></div>

                <button onclick="logout()" class="secondary">ğŸšª Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden"></div>

    <script>
        // ==================== Firebase Config ====================
        const firebaseConfig = {
            apiKey: "AIzaSyAutas4LwSZUuhk6mJquT_n5LuRPyuCZUc",
            authDomain: "ramadan-quiz-a4778.firebaseapp.com",
            projectId: "ramadan-quiz-a4778",
            storageBucket: "ramadan-quiz-a4778.firebasestorage.app",
            messagingSenderId: "574405195850",
            appId: "1:574405195850:web:0947812576a5aee2540eb3",
            measurementId: "G-ZENC5NR921"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const analytics = firebase.analytics();

        // ==================== ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ====================
        function playMusic() {
            const music = document.getElementById('bg-music');
            music.volume = 0.3;
            music.play().catch(e => console.log('Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ­ØªØ§Ø¬ ØªÙØ§Ø¹Ù„'));
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ù„Ù…Ø³Ø©
        document.body.addEventListener('click', function initMusic() {
            playMusic();
            document.body.removeEventListener('click', initMusic);
        });

        // ==================== Ø¹Ù†Ø§ØµØ± Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© ====================
        function createBgElements() {
            const container = document.getElementById('bgAnimation');
            for (let i = 0; i < 20; i++) {
                const span = document.createElement('span');
                span.style.left = Math.random() * 100 + '%';
                span.style.animationDuration = Math.random() * 10 + 10 + 's';
                span.style.width = span.style.height = Math.random() * 30 + 10 + 'px';
                container.appendChild(span);
            }
        }
        createBgElements();

        // ==================== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================
        let currentUser = null;
        let isAdmin = false;
        let currentQuestion = null;

        // ==================== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ====================
        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = `toast ${isError ? 'error' : ''}`;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // ==================== Ø§Ù„Ø¯Ø®ÙˆÙ„ ====================
        async function login() {
            const email = document.getElementById('emailInput').value.trim();
            
            if (!email) {
                showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', true);
                return;
            }

            currentUser = { email: email };
            isAdmin = (email === 'admin@ramadan.com');

            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Firestore
            try {
                await db.collection('users').doc(email).set({
                    email: email,
                    joinedAt: new Date().toISOString()
                });
            } catch (error) {
                console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
            }

            document.getElementById('loginScreen').classList.add('hidden');

            if (isAdmin) {
                document.getElementById('adminScreen').classList.remove('hidden');
                loadAdminData();
                showToast('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ù…Ø¯ÙŠØ±');
            } else {
                document.getElementById('quizScreen').classList.remove('hidden');
                loadQuestion();
                showToast('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©');
            }
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ ====================
        async function loadQuestion() {
            try {
                const doc = await db.collection('settings').doc('current').get();
                
                if (doc.exists) {
                    currentQuestion = doc.data();
                } else {
                    // Ø³Ø¤Ø§Ù„ Ø§ÙØªØ±Ø§Ø¶ÙŠ
                    currentQuestion = {
                        text: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ ÙØ±Ø¶ ÙÙŠÙ‡Ø§ Ø§Ù„ØµÙŠØ§Ù…ØŸ",
                        answers: ["Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", "Ø§Ù„Ø£Ù†ÙØ§Ù„", "Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©"],
                        correct: 1
                    };
                }

                document.getElementById('questionText').textContent = currentQuestion.text;
                
                const container = document.getElementById('answersContainer');
                container.innerHTML = '';
                
                currentQuestion.answers.forEach((answer, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'answer-btn';
                    btn.textContent = answer;
                    btn.onclick = () => submitAnswer(index + 1);
                    container.appendChild(btn);
                });
            } catch (error) {
                showToast('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„', true);
                console.log(error);
            }
        }

        // ==================== ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¬Ø§Ø¨Ø© ====================
        async function submitAnswer(answerIndex) {
            if (!currentUser) return;

            const isCorrect = (answerIndex === currentQuestion.correct);

            try {
                await db.collection('answers').add({
                    user: currentUser.email,
                    question: currentQuestion.text,
                    answer: currentQuestion.answers[answerIndex - 1],
                    answerIndex: answerIndex,
                    isCorrect: isCorrect,
                    timestamp: new Date().toISOString()
                });

                showToast(
                    isCorrect ? 'âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠÙƒ' : 'âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰',
                    !isCorrect
                );
            } catch (error) {
                showToast('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©', true);
                console.log(error);
            }
        }

        // ==================== Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ (Ù„Ù„Ù…Ø¯ÙŠØ±) ====================
        async function addQuestion() {
            const text = document.getElementById('qText').value;
            const answers = [
                document.getElementById('a1').value,
                document.getElementById('a2').value,
                document.getElementById('a3').value,
                document.getElementById('a4').value
            ];
            const correct = parseInt(document.getElementById('correct').value);

            if (!text || answers.some(a => !a) || !correct) {
                showToast('Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', true);
                return;
            }

            if (correct < 1 || correct > 4) {
                showToast('Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ† 1 Ùˆ 4', true);
                return;
            }

            const newQuestion = {
                text: text,
                answers: answers,
                correct: correct,
                createdAt: new Date().toISOString()
            };

            try {
                // Ø­ÙØ¸ ÙƒØ³Ø¤Ø§Ù„ Ø­Ø§Ù„ÙŠ
                await db.collection('settings').doc('current').set(newQuestion);
                
                // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                await db.collection('archive').add(newQuestion);

                showToast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­');
                
                setTimeout(() => {
                    location.reload();
                }, 1500);
            } catch (error) {
                showToast('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„', true);
                console.log(error);
            }
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ± ====================
        async function loadAdminData() {
            try {
                // Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
                const answersSnapshot = await db.collection('answers').get();
                const answers = [];
                answersSnapshot.forEach(doc => answers.push(doc.data()));

                const correctCount = answers.filter(a => a.isCorrect).length;
                const wrongCount = answers.filter(a => !a.isCorrect).length;
                const total = answers.length;

                document.getElementById('statsContainer').innerHTML = `
                    <div class="stat correct">
                        <div class="stat-number correct">${correctCount}</div>
                        <div class="stat-label">ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div class="stat wrong">
                        <div class="stat-number wrong">${wrongCount}</div>
                        <div class="stat-label">Ø®Ø§Ø·Ø¦Ø©</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">${total}</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                    </div>
                `;

                // Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                const archiveSnapshot = await db.collection('archive').orderBy('createdAt', 'desc').get();
                const archive = [];
                archiveSnapshot.forEach(doc => {
                    archive.push({ id: doc.id, ...doc.data() });
                });

                const archiveContainer = document.getElementById('archiveContainer');
                archiveContainer.innerHTML = '';

                archive.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'archive-item';
                    
                    // Ø¬Ù„Ø¨ Ø¥Ø¬Ø§Ø¨Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„
                    const questionAnswers = answers.filter(a => a.question === item.text);
                    
                    let answersHtml = '';
                    if (questionAnswers.length > 0) {
                        answersHtml = questionAnswers.map(a => `
                            <div style="color: ${a.isCorrect ? '#28a745' : '#dc3545'}; margin: 5px 0; font-size: 0.9rem;">
                                ${a.isCorrect ? 'âœ…' : 'âŒ'} ${a.user}: ${a.answer}
                            </div>
                        `).join('');
                    } else {
                        answersHtml = '<div style="color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª</div>';
                    }

                    div.innerHTML = `
                        <strong style="display:block; margin-bottom:10px;">ğŸ“Œ ${item.text}</strong>
                        ${answersHtml}
                    `;

                    archiveContainer.appendChild(div);
                });
            } catch (error) {
                showToast('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', true);
                console.log(error);
            }
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© ====================
        async function showCorrectAnswers() {
            try {
                const snapshot = await db.collection('answers').where('isCorrect', '==', true).get();
                const answers = [];
                snapshot.forEach(doc => answers.push(doc.data()));
                
                if (answers.length === 0) {
                    showToast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©', true);
                    return;
                }
                
                let message = 'âœ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©:\n\n';
                answers.forEach(a => {
                    message += `ğŸ“§ ${a.user}\nğŸ“ ${a.answer}\n\n`;
                });
                
                alert(message);
            } catch (error) {
                showToast('Ø®Ø·Ø£', true);
            }
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© ====================
        async function showWrongAnswers() {
            try {
                const snapshot = await db.collection('answers').where('isCorrect', '==', false).get();
                const answers = [];
                snapshot.forEach(doc => answers.push(doc.data()));
                
                if (answers.length === 0) {
                    showToast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©', true);
                    return;
                }
                
                let message = 'âŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©:\n\n';
                answers.forEach(a => {
                    message += `ğŸ“§ ${a.user}\nğŸ“ ${a.answer}\n\n`;
                });
                
                alert(message);
            } catch (error) {
                showToast('Ø®Ø·Ø£', true);
            }
        }

        // ==================== Ø®Ø±ÙˆØ¬ ====================
        function logout() {
            location.reload();
        }
    </script>
</body>
        </html>
